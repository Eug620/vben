import{d as a,b as t,ay as l,c as e,q as r,u as n,a_ as i,ax as u,o as s,j as o,l as p}from"./index.12c9c6d9.js";import{u as d}from"./useRaf.e461562f.js";var c=a({name:"CountTo",props:{startVal:{type:Number,required:!1,default:0},endVal:{type:Number,required:!1,default:2017},duration:{type:Number,required:!1,default:3e3},autoplay:{type:Boolean,required:!1,default:!0},decimals:{type:Number,required:!1,default:0,validator:a=>a>=0},decimal:{type:String,required:!1,default:"."},separator:{type:String,required:!1,default:","},prefix:{type:String,required:!1,default:""},suffix:{type:String,required:!1,default:""},useEasing:{type:Boolean,required:!1,default:!0},easingFn:{type:Function,default:(a,t,l,e)=>l*(1-Math.pow(2,-10*a/e))*1024/1023+t}},emits:["mounted","callback"],setup(a,{emit:s}){const{requestAnimationFrame:o,cancelAnimationFrame:p}=d(),c=t({localStartVal:a.startVal,displayValue:S(a.startVal),printVal:null,paused:!1,localDuration:a.duration,startTime:null,timestamp:null,remaining:null,rAF:null});l((()=>{a.autoplay&&m(),s("mounted")}));const V=e((()=>a.startVal>a.endVal));function m(){const{startVal:t,duration:l}=a;c.localStartVal=t,c.startTime=null,c.localDuration=l,c.paused=!1,c.rAF=o(y)}function f(){c.startTime=null,c.localDuration=+c.remaining,c.localStartVal=+c.printVal,o(y)}function y(t){const{useEasing:l,easingFn:e,endVal:r}=a;c.startTime||(c.startTime=t),c.timestamp=t;const i=t-c.startTime;c.remaining=c.localDuration-i,l?n(V)?c.printVal=c.localStartVal-e(i,0,c.localStartVal-r,c.localDuration):c.printVal=e(i,c.localStartVal,r-c.localStartVal,c.localDuration):n(V)?c.printVal=c.localStartVal-(c.localStartVal-r)*(i/c.localDuration):c.printVal=c.localStartVal+(r-c.localStartVal)*(i/c.localDuration),n(V)?c.printVal=c.printVal<r?r:c.printVal:c.printVal=c.printVal>r?r:c.printVal,c.displayValue=S(c.printVal),i<c.localDuration?c.rAF=o(y):s("callback")}function S(t){const{decimals:l,decimal:e,separator:r,suffix:n,prefix:u}=a;t=Number(t).toFixed(l);const s=(t+="").split(".");let o=s[0];const p=s.length>1?e+s[1]:"",d=/(\d+)(\d{3})/;if(r&&!i(r))for(;d.test(o);)o=o.replace(d,"$1"+r+"$2");return u+o+p+n}return r([()=>a.startVal,()=>a.endVal],(()=>{a.autoplay&&m()})),{count:y,reset:function(){c.startTime=null,p(c.rAF),c.displayValue=S(a.startVal)},resume:f,start:m,pauseResume:function(){c.paused?(f(),c.paused=!1):(p(c.rAF),c.paused=!0)},displayValue:u(c,"displayValue")}}});c.render=function(a,t,l,e,r,n){return s(),o("span",null,p(a.displayValue),1)};export{c as s};
