import{d as e,r as t,b as n,ay as o,aI as s,a$ as c,u as l,c as i,y as d,cS as a,k as r,cT as u,A as m}from"./index.12c9c6d9.js";import{I as y}from"./index.6748a653.js";const p={width:{type:Number,default:180},customEvent:{type:Object,default:null},styles:{type:Object,default:null},showIcon:{type:Boolean,default:!0},axis:{type:Object,default:()=>({x:0,y:0})},items:{type:Array,default:()=>[]},resolve:{type:Function,default:null}};var f=e({name:"ContextMenu",props:p,setup(e){const a=t(null),r=n({show:!1});o((()=>{s((()=>{r.show=!0}))})),c((()=>{const e=l(a);e&&document.body.removeChild(e)}));const u=i((()=>{const{axis:t,items:n,styles:o,width:s}=e,{x:c,y:l}=t||{x:0,y:0},i=40*(n||[]).length,d=s,a=document.body;return{...o,width:s+"px",left:(a.clientWidth<c+d?c-d:c)+"px",top:(a.clientHeight<l+i?l-i:l)+"px"}}));function m(e,t){const{handler:n,disabled:o}=e;o||(r.show=!1,t&&(t.stopPropagation(),t.preventDefault()),n&&n())}function p(t){return t.map((t=>{const{disabled:n,label:o}=t;return d("li",{class:"context-menu__item "+(n?"disabled":""),key:o},d("a",{onClick:m.bind(null,t),style:"color:#333;"},function(t){const{icon:n,label:o}=t,{showIcon:s}=e;return d("span",{style:"display: inline-block; width: 100%;"},s&&n&&d(y,{class:"mr-2",icon:n}),d("span",null,o))}(t)))}))}return()=>{const{items:t}=e;return d("ul",{class:["context-menu",!r.show&&"hidden"],ref:a,style:l(u)},p(t))}}});const v={doms:[],resolve:()=>{}},h=function(e){const{event:t}=e||{};try{t.preventDefault()}catch(e){console.log(e)}if(a)return new Promise((n=>{const o=document.createElement("div"),s={};void 0!==e.styles&&(s.styles=e.styles),void 0!==e.items&&(s.items=e.items),void 0!==e.event&&(s.customEvent=t,s.axis={x:t.clientX,y:t.clientY});const c=r(f,s);u(c,o);const l=function(){v.resolve("")};v.doms.push(o);const i=function(){v.doms.forEach((e=>{try{document.body.removeChild(e)}catch(e){}})),document.body.removeEventListener("click",l),document.body.removeEventListener("scroll",l)};v.resolve=function(...e){n(e[0]),i()},i(),document.body.appendChild(o),document.body.addEventListener("click",l),document.body.addEventListener("scroll",l)}))},b=function(){v&&(v.resolve(""),v.doms=[])};function x(e=!0){return m()&&e&&c((()=>{b()})),[h,b]}export{x as u};
