let e=document.createElement("style");e.innerHTML=".iframe-page .ant-spin-nested-loading[data-v-4a90bcdc]{position:relative;height:100%}.iframe-page .ant-spin-nested-loading .ant-spin-container[data-v-4a90bcdc]{width:100%;height:100%;padding:10px}.iframe-page__mask[data-v-4a90bcdc]{position:absolute;top:0;left:0;width:100%;height:100%}.iframe-page__main[data-v-4a90bcdc]{width:100%;height:100%;overflow:hidden;background:#fff;border:0;box-sizing:border-box}",document.head.appendChild(e);import{a,a$ as t,Z as n,bL as r,u as s,c as o,t as i,av as c,aO as m,d,bO as u,r as l,ay as g,aI as p,i as f,o as h,j as b,k as v,w as S,F as w,ad as y,a7 as F,a8 as P,m as R,y as x,bW as T,bX as _,a3 as j,e as I}from"./index.12c9c6d9.js";import{g as E}from"./domUtils.0cbdb707.js";import{u as L}from"./useWindowSize.8d67cb61.js";var A=d({name:"IFrame",components:{Spin:u},props:{frameSrc:{type:String}},setup(){const e=l(!1),a=l(50),t=l(window.innerHeight),n=l(null);function r(){const e=s(n);if(!e)return;let{top:r}=E(e);r+=20,a.value=r,t.value=window.innerHeight-r;const o=document.documentElement.clientHeight-r;e.style.height=o+"px"}function i(){e.value=!1,r()}return L(r,150,{immediate:!0}),g((()=>{e.value=!0,p((()=>{const e=s(n);e&&(e.attachEvent?e.attachEvent("onload",(()=>{i()})):e.onload=()=>{i()})}))})),{getWrapStyle:o((()=>({height:s(t)+"px"}))),loading:e,frameRef:n}}});const k=S("data-v-4a90bcdc"),C=k((function(e,a,t,n,r,s){const o=f("Spin");return h(),b("div",{class:"iframe-page",style:e.getWrapStyle},[v(o,{spinning:e.loading,size:"large",style:e.getWrapStyle},{default:k((()=>[v("iframe",{src:e.frameSrc,class:"iframe-page__main",ref:"frameRef"},null,8,["src"])])),_:1},8,["spinning","style"])],4)}));A.render=C,A.__scopeId="data-v-4a90bcdc";var W=d({name:"FrameLayout",components:{FramePage:A},setup(){const{hasRenderFrame:e,showIframe:t,getFramePages:d}=function(){const{currentRoute:e}=n();function t(e){let a=[];for(const n of e){const{meta:{frameSrc:e}={},children:r}=n;e&&a.push(n),r&&r.length&&a.push(...t(r))}return a=r(a,"name"),a}const d=o((()=>t(i(c.getRoutes()))||[])),u=o((()=>m.getTabsState.reduce(((e,a)=>(a.meta&&Reflect.has(a.meta,"frameSrc")&&e.push(a.path),e)),[])));return{hasRenderFrame:function(e){const{multiTabsSetting:{show:t}}=a.getProjectConfig;return!t||s(u).includes(e)},getFramePages:d,showIframe:function(a){return a.path===s(e).path},getAllFramePages:t}}();return{hasRenderFrame:e,showIframe:t,getFramePages:d}}});W.render=function(e,a,t,n,r,s){const o=f("FramePage");return h(!0),b(y,null,w(e.getFramePages,(a=>(h(),b(y,{key:a.path},[a.meta.frameSrc&&e.hasRenderFrame(a.path)?F((h(),b(o,{key:0,frameSrc:a.meta.frameSrc},null,8,["frameSrc"])),[[P,e.showIframe(a)]]):R("",!0)],64)))),128)};var H=d({name:"PageLayout",setup(){const e=o((()=>a.getProjectConfig)),{openPageLoading:n}=s(e);let r={};if(n){const{on:e}=function(){function e(){const{openRouterTransition:e,openPageLoading:t}=a.getProjectConfig;e&&t&&a.setPageLoadingAction(!1)}return t((()=>{e(),stop()})),{handleAfterEnter:e,on:{onAfterEnter:e}}}();r=e}const{projectSetting:c}=I();return()=>{const{routerTransition:a,openRouterTransition:t,openKeepAlive:n,multiTabsSetting:{show:o,max:d}}=s(e),u=n&&o,l=i(m.getKeepAliveTabsState);return x("div",null,x(T,null,{default:({Component:e,route:n})=>{const s=n.meta.inTab?"fade":null,o=u?x(_,{max:d,include:l},x(e,{...n.params})):x(e,{...n.params});return t?x(j,{...r,name:s||n.meta.transitionName||a,mode:"out-in",appear:!0},(()=>o)):o}}),c.canEmbedIFramePage&&x(W,null))}}});export default H;
