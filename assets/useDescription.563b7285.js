import{aa as e,k as t,V as n,a6 as o,$ as a,P as s,Q as c,cr as r,cs as l,R as i,a9 as u,be as p,aT as f,bb as d,d as m,r as b,c as y,u as v,y as h,C as x,aZ as g,b3 as k,A as C,b0 as P}from"./index.12c9c6d9.js";import{b as j}from"./LazyContainer.8b895cd0.js";import{g as w}from"./tsxHelper.629ff8d8.js";function D(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var O=function(n,o){var a,s=o.attrs,c=s.child,r=void 0===c?{}:c,l=s.bordered,i=s.colon,u=s.type,p=s.layout,f=s.colKey,d=e(r),m=d.prefixCls,b=d.span,y=void 0===b?1:b,v=r.children,h=void 0===v?{}:v,x=r.props,g=(void 0===x?{}:x).label||h.label&&h.label(),k=h.default&&h.default(),C={class:["".concat(m,"-item-label"),(a={},D(a,"".concat(m,"-item-colon"),i),D(a,"".concat(m,"-item-no-label"),!g),a)],key:"".concat(f,"-label")};return"vertical"===p&&(C.colspan=2*y-1),l?"label"===u?t("th",C,[g]):t("td",{class:"".concat(m,"-item-content"),key:"".concat(f,"-content"),colspan:2*y-1},[k]):t("td",{colspan:y,class:"".concat(m,"-item")},"vertical"===p?"content"===u?[t("span",{class:"".concat(m,"-item-content"),key:"".concat(f,"-content")},[k])]:[t("span",{class:["".concat(m,"-item-label"),D({},"".concat(m,"-item-colon"),i)],key:"".concat(f,"-label")},[g])]:[t("span",C,[g]),t("span",{class:"".concat(m,"-item-content"),key:"".concat(f,"-content")},[k])])};function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function z(e){return(z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function A(e){var t=e;return void 0===e?t=[]:Array.isArray(e)||(t=[e]),t}var E={name:"ADescriptionsItem",props:o({prefixCls:n.string,label:n.any,span:n.number},{span:1}),render:function(){return null}},I={prefixCls:n.string,bordered:n.bool,size:n.oneOf(["default","middle","small"]).def("default"),title:n.any,column:n.oneOfType([n.number,n.object]),layout:n.oneOf(["horizontal","vertical"]),colon:n.bool},M={xxl:3,xl:3,lg:3,md:3,sm:2,xs:1},W={name:"ADescriptions",Item:E,mixins:[a],props:o(I,{column:M}),setup:function(){return{configProvider:s("configProvider",c)}},data:function(){return{screens:{},token:void 0}},methods:{getColumn:function(){var e=this.$props.column;if("object"===z(e))for(var t=0;t<r.length;t++){var n=r[t];if(this.screens[n]&&void 0!==e[n])return e[n]||M[n]}return"number"==typeof e?e:3},renderRow:function(e,n,o,a,s,c){var r=o.prefixCls,l=function(e,n,o){return t(O,{child:e,bordered:a,colon:c,type:n,key:"".concat(n,"-").concat(e.key||o),colKey:"".concat(n,"-").concat(e.key||o),layout:s},null)},i=[],u=[];return A(e).forEach((function(e,t){i.push(l(e,"label",t)),"vertical"===s?u.push(l(e,"content",t)):a&&i.push(l(e,"content",t))})),"vertical"===s?[t("tr",{class:"".concat(r,"-row"),key:"label-".concat(n)},[i]),t("tr",{class:"".concat(r,"-row"),key:"content-".concat(n)},[u])]:t("tr",{class:"".concat(r,"-row"),key:n},[i])}},mounted:function(){var e=this,t=this.$props.column;this.token=l.subscribe((function(n){"object"===z(t)&&e.setState({screens:n})}))},beforeUnmount:function(){l.unsubscribe(this.token)},render:function(){var n,o=this,a=this.$props,s=a.prefixCls,c=a.size,r=a.bordered,l=void 0!==r&&r,m=a.layout,b=void 0===m?"horizontal":m,y=a.colon,v=void 0===y||y,h=i(this,"title"),x=(0,this.configProvider.getPrefixCls)("descriptions",s),g=this.getColumn(),k=function(t,n){var o,a=[],s=null,c=A(t);return c.forEach((function(t,r){var l=e(t),i=t;s||(o=n,s=[],a.push(s));var u=!0;r===c.length-1&&(u=!l.span||l.span===o,i=f(i,{span:o}));var p=l.span,m=void 0===p?1:p;s.push(i),(o-=m)<=0&&(s=null,d(0===o&&u,"Descriptions","Sum of column `span` in a line exceeds `column` of Descriptions."))})),a}(A(u(this)).map((function(e){return p(e)?f(e,{prefixCls:x}):null})).filter((function(e){return e})),g);return t("div",{class:[x,(n={},S(n,"".concat(x,"-").concat(c),"default"!==c),S(n,"".concat(x,"-bordered"),!!l),n)]},[h&&t("div",{class:"".concat(x,"-title")},[h]),t("div",{class:"".concat(x,"-view")},[t("table",null,[t("tbody",null,[k.map((function(e,t){return o.renderRow(e,t,{prefixCls:x},l,b,v)}))])])])])},install:function(e){e.component(W.name,W),e.component(W.Item.name,W.Item)}},$={useCollapse:{type:Boolean,default:!0},title:{type:String,default:""},size:{type:String,default:"small"},bordered:{type:Boolean,default:!0},column:{type:[Number,Object],default:()=>({xxl:4,xl:3,lg:3,md:3,sm:2,xs:1})},collapseOptions:{type:Object,default:null},schema:{type:Array,default:()=>[]},data:{type:Object,default:null}};var R=m({props:$,emits:["register"],setup(e,{attrs:t,slots:n,emit:o}){const a=b(null),s=y((()=>({...e,...v(a)}))),c=y((()=>({...e,...v(a)||{},title:void 0}))),r=y((()=>!!v(s).title)),l=y((()=>({canExpand:!1,...v(c).collapseOptions})));function i({label:e,labelMinWidth:t,labelStyle:n}){return n||t?h("div",{style:{...n,minWidth:t+"px"}},e):e}o("register",{setDescProps:function(e){const t=g(v(a)||{},e);a.value=k(t)}});const u=()=>h(W,{class:"description",...{...t,...v(c)}},(()=>function(){const{schema:e}=v(c);return v(e).map((e=>{const{render:t,field:n,span:o,show:a,contentMinWidth:s}=e,{data:r}=v(c);if(a&&x(a)&&!a(r))return null;const l=()=>x(t)?t(r&&r[n],r):v(r)&&v(r)[n],u=s;return h(W.Item,{label:i(e),key:n,span:o},(()=>s?h("div",{style:{minWidth:u+"px"}},l()):l()))}))}()));return()=>v(r)?(()=>{const t=e.useCollapse?u():h("div",null,u());return e.useCollapse?h(j,{title:v(s).title,canExpan:v(l).canExpand,helpMessage:v(l).helpMessage},{default:()=>t,action:()=>w(n,"action")}):t})():u()}});function B(e){if(!C())throw new Error("Please put useDescription function in the setup function!");const t=b(null),n=b(!1);return[function(o){v(n)&&P()||(t.value=o,e&&o.setDescProps(e),n.value=!0)},{setDescProps:e=>{v(t).setDescProps(e)}}]}export{R as D,B as u};
